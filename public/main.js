'use strict';

var portfolio = angular.module('portfolio', ['ui.router']);

portfolio.run(function ($rootScope) {
	$rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {
		console.error('Error Transitioning From' + fromState.name + "to" + toState.name + ":" + error);
	});
});

portfolio.config(function ($locationProvider) {
	$locationProvider.html5Mode(true);
});
portfolio.controller('formCtrl', function ($scope) {
	console.log('hitting form controller');
	$scope.submitForm = function () {
		console.log($scope.form);
	};
});
portfolio.controller('projCTRL', function ($scope, projects) {
	projects.getRepos().then(function (arr) {
		$scope.repos = arr;
		console.log($scope.repos);
	});
});
portfolio.directive('timeline', function () {
	return {
		restrict: 'E',
		templateUrl: 'js/directives/timeline.html',
		link: function link(scope, element, attrs) {
			function Timeline(cvs) {
				var self = this,
				    paused = true,
				    rafid = 0,
				    mouse = { x: 0, y: 0 },
				    canvas = cvs,
				    ctx = null;

				self.lines = [];

				self.isOK = false;
				self.options = {
					speed: 0.1,
					density: 8,
					radius: 600
				};
				self.targets = [[29, 32, 48, 68], [29, 33, 38]];
				self.dotColors = [['#13669b', 'rgba(19, 102, 155, 0.3)', 'rgba(19, 102, 155, 0.08)'], ['#7dd317', 'rgba(113, 222, 15, 0.3)', 'rgba(91, 164, 22, 0.12)']];

				self.isPaused = function () {
					return paused;
				};

				function InitDots() {
					var tl = $('.timeline');
					var top = tl.find('h2').outerHeight();

					self.lines[0].dots = [];
					var y = top;
					tl.find('article:first figure').each(function () {

						self.lines[0].dots.push([$(this).outerWidth() + 20, y + 20]);

						y += $(this).outerHeight();
					});

					self.lines[1].dots = [];
					var y = top;
					tl.find('article:last figure').each(function () {

						self.lines[1].dots.push([canvas.width - $(this).outerWidth() - 20, y + 20]);

						y += $(this).outerHeight();
					});
				}

				function OnResize() {
					canvas.width = canvas.offsetWidth;
					canvas.height = canvas.offsetHeight;

					var wasPaused = paused;
					self.toggle(false);
					// Init lines
					self.lines[0].reset(canvas.offsetWidth / 2 - 15);
					self.lines[1].reset(canvas.offsetWidth / 2 + 15);

					InitDots();

					self.toggle(!wasPaused);
				}

				function init() {
					var result = false;
					try {
						result = !!(canvas.getContext && (ctx = canvas.getContext('2d')));

						self.lines[0] = new Line(0, canvas.offsetHeight - 100, '#4789a3', self.options, mouse);
						self.lines[1] = new Line(0, canvas.offsetHeight - 100, '#a0d59c', self.options, mouse);
					} catch (e) {
						return false;
					}

					$(canvas).mousemove(function (e) {

						if (e.offsetX) {
							mouse.x = e.offsetX;
							mouse.y = e.offsetY;
						} else if (e.layerX) {
							mouse.x = e.layerX;
							mouse.y = e.layerY;
						} else {
							mouse.x = e.pageX - $(canvas).offset().left;
							mouse.y = e.pageY - $(canvas).offset().top;
						}
					});

					$(window).resize(OnResize);

					OnResize();

					return result;
				}

				function Line(y, height, color, options, mouse) {
					var self = this;

					self.color = color;
					self.options = options;
					self.mouse = mouse;
					self.height = height;
					self.dots = [];
					self.y = y;

					self.points = [];

					self.reset = function (x, f) {
						self.points = [];
						for (var y = self.y; y < self.height; y += self.options.density) {
							self.points.push(new Point(x, y, self.color));
						}
					};

					self.update = function () {
						for (var i = 0; i < self.points.length; i++) {
							self.points[i].update(self.mouse, self.options);
						}
					};

					function Point(x, y) {
						this.y = y;
						this.x = x;
						this.base = { x: x, y: y };

						this.update = function (mouse, options) {
							var dx = this.x - mouse.x,
							    dy = this.y - mouse.y,
							    alpha = Math.atan2(dx, dy),
							    alpha = alpha > 0 ? alpha : 2 * Math.PI + alpha,
							    d = options.radius / Math.sqrt(dx * dx + dy * dy);

							this.y += Math.cos(alpha) * d + (this.base.y - this.y) * options.speed;
							this.x += Math.sin(alpha) * d + (this.base.x - this.x) * options.speed;
						};
					}
				}

				function drawCircle(p, r, color) {
					ctx.fillStyle = color;
					ctx.beginPath();
					ctx.arc(p.x, p.y, r, 0, 2 * Math.PI, true);
					ctx.closePath();
					ctx.fill();
				}

				function drawLine(p1, p2) {
					ctx.beginPath();
					ctx.moveTo(p1.x, p1.y);
					ctx.lineTo(p2.x, p2.y);
					ctx.stroke();
					ctx.closePath();
				}

				function redraw() {
					ctx.clearRect(0, 0, canvas.width, canvas.height);

					for (var i = 0; i < 2; i++) {
						var points = self.lines[i].points;

						ctx.beginPath();
						ctx.lineWidth = 2;
						ctx.strokeStyle = self.lines[i].color;
						ctx.moveTo(points[15].x, points[15].y);

						for (var j = 15; j < points.length - 2; j++) {
							var point = points[j];

							var xc = (points[j + 1].x + point.x) / 2;
							var yc = (points[j + 1].y + point.y) / 2;

							ctx.quadraticCurveTo(point.x, point.y, xc, yc);
						}
						ctx.stroke();
						ctx.closePath();

						// Dots
						ctx.lineWidth = 1.2;
						ctx.strokeStyle = self.dotColors[i][2];
						for (var j = 0; j < self.lines[i].dots.length; j++) {
							var dot = self.lines[i].dots[j],
							    id = self.targets[i][j],
							dot2 = [(self.lines[i].points[id].x + self.lines[i].points[id + 1].x) / 2, (self.lines[i].points[id].y + self.lines[i].points[id + 1].y) / 2];

							var p1 = { x: dot[0], y: dot[1] };
							var p2 = { x: dot2[0], y: dot2[1] };

							drawLine(p1, p2);
							drawCircle(p1, 3, self.dotColors[i][0]);

							drawCircle(p2, 11, self.dotColors[i][1]);
							drawCircle(p2, 5.5, self.dotColors[i][0]);
						}
					}
				}

				function animate() {
					rafid = requestAnimationFrame(animate);

					self.lines[0].update();
					self.lines[1].update();

					redraw();
				}

				self.toggle = function (run) {
					if (!self.isOK) return false;

					if (run === undefined) self.toggle(!paused);else if (!!run && paused) {
						paused = false;
						animate();
					} else if (!!!run) {
						paused = true;
						cancelAnimationFrame(rafid);
					}
					return true;
				};

				self.isOK = init();
			}
			new Timeline($('#cvs3').get(0)).toggle(true);
		}
	};
});

portfolio.factory('projects', function ($http) {
	var factoryObj = {};
	factoryObj.getRepos = function () {
		return $http.get('https://api.github.com/user/repos', {
			username: 'mosane',
			password: 'xxxxxxxxx'
		}).then(function (arr) {
			return arr.data;
		});
	};
	return factoryObj;
});
'use strict';

portfolio.config(function ($stateProvider) {
	$stateProvider.state('clients', {
		url: '/clients',
		templateUrl: 'templates/clients.html'
	});
});
'use strict';

portfolio.config(function ($stateProvider) {
	$stateProvider.state('contact', {
		url: '/contact',
		templateUrl: 'templates/contact.html'
	});
});
portfolio.config(function ($stateProvider) {
	$stateProvider.state('header', {
		url: '/',
		templateUrl: '/templates/header.html'
	});
});
'use strict';

portfolio.config(function ($stateProvider) {
	$stateProvider.state('projects', {
		url: '/projects',
		templateUrl: 'templates/portfolio.html',
		controller: 'projCTRL'
	});
});
'use strict';

portfolio.config(function ($stateProvider) {
	$stateProvider.state('services', {
		url: '/services',
		templateUrl: '/templates/services.html'
	});
});
'use strict';

portfolio.config(function ($stateProvider) {
	$stateProvider.state('team', {
		url: '/team',
		templateUrl: '/templates/team.html'
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2Zvcm1DdHJsLmpzIiwiY29udHJvbGxlcnMvcHJvamVjdEN0cmwuanMiLCJkaXJlY3RpdmVzL3RpbWVsaW5lLmpzIiwiZmFjdG9yaWVzL3BvcnRmb2xpby5qcyIsInN0YXRlcy9jbGllbnRzLmpzIiwic3RhdGVzL2NvbnRhY3QuanMiLCJzdGF0ZXMvaGVhZGVyLmpzIiwic3RhdGVzL3BvcnRmb2xpby5qcyIsInN0YXRlcy9zZXJ2aWNlcy5qcyIsInN0YXRlcy90ZWFtLmpzIl0sIm5hbWVzIjpbInBvcnRmb2xpbyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkcm9vdFNjb3BlIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiZXJyb3IiLCJjb25zb2xlIiwibmFtZSIsImNvbmZpZyIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiY29udHJvbGxlciIsIiRzY29wZSIsImxvZyIsInN1Ym1pdEZvcm0iLCJmb3JtIiwicHJvamVjdHMiLCJnZXRSZXBvcyIsInRoZW4iLCJhcnIiLCJyZXBvcyIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwidGVtcGxhdGVVcmwiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJUaW1lbGluZSIsImN2cyIsInNlbGYiLCJwYXVzZWQiLCJyYWZpZCIsIm1vdXNlIiwieCIsInkiLCJjYW52YXMiLCJjdHgiLCJsaW5lcyIsImlzT0siLCJvcHRpb25zIiwic3BlZWQiLCJkZW5zaXR5IiwicmFkaXVzIiwidGFyZ2V0cyIsImRvdENvbG9ycyIsImlzUGF1c2VkIiwiSW5pdERvdHMiLCJ0bCIsIiQiLCJ0b3AiLCJmaW5kIiwib3V0ZXJIZWlnaHQiLCJkb3RzIiwiZWFjaCIsInB1c2giLCJvdXRlcldpZHRoIiwid2lkdGgiLCJPblJlc2l6ZSIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwid2FzUGF1c2VkIiwidG9nZ2xlIiwicmVzZXQiLCJpbml0IiwicmVzdWx0IiwiZ2V0Q29udGV4dCIsIkxpbmUiLCJlIiwibW91c2Vtb3ZlIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJsYXllclgiLCJsYXllclkiLCJwYWdlWCIsIm9mZnNldCIsImxlZnQiLCJwYWdlWSIsIndpbmRvdyIsInJlc2l6ZSIsImNvbG9yIiwicG9pbnRzIiwiZiIsIlBvaW50IiwidXBkYXRlIiwiaSIsImxlbmd0aCIsImJhc2UiLCJkeCIsImR5IiwiYWxwaGEiLCJNYXRoIiwiYXRhbjIiLCJQSSIsImQiLCJzcXJ0IiwiY29zIiwic2luIiwiZHJhd0NpcmNsZSIsInAiLCJyIiwiZmlsbFN0eWxlIiwiYmVnaW5QYXRoIiwiYXJjIiwiY2xvc2VQYXRoIiwiZmlsbCIsImRyYXdMaW5lIiwicDEiLCJwMiIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsInJlZHJhdyIsImNsZWFyUmVjdCIsImxpbmVXaWR0aCIsInN0cm9rZVN0eWxlIiwiaiIsInBvaW50IiwieGMiLCJ5YyIsInF1YWRyYXRpY0N1cnZlVG8iLCJkb3QiLCJpZCIsImRvdDIiLCJhbmltYXRlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwidW5kZWZpbmVkIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJnZXQiLCJmYWN0b3J5IiwiJGh0dHAiLCJmYWN0b3J5T2JqIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRhdGEiLCIkc3RhdGVQcm92aWRlciIsInN0YXRlIiwidXJsIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxJQUFBQSxZQUFBQyxRQUFBQyxNQUFBLENBQUEsV0FBQSxFQUFBLENBQUEsV0FBQSxDQUFBLENBQUE7O0FBRUFGLFVBQUFHLEdBQUEsQ0FBQSxVQUFBQyxVQUFBLEVBQUE7QUFDQUEsWUFBQUMsR0FBQSxDQUFBLG1CQUFBLEVBQUEsVUFBQUMsS0FBQSxFQUFBQyxPQUFBLEVBQUFDLFFBQUEsRUFBQUMsU0FBQSxFQUFBQyxVQUFBLEVBQUFDLEtBQUEsRUFBQTtBQUNBQyxVQUFBRCxLQUFBLENBQUEsNkJBQUFGLFVBQUFJLElBQUEsR0FBQSxJQUFBLEdBQUFOLFFBQUFNLElBQUEsR0FBQSxHQUFBLEdBQUFGLEtBQUE7QUFDQSxFQUZBO0FBR0EsQ0FKQTs7QUFNQVgsVUFBQWMsTUFBQSxDQUFBLFVBQUFDLGlCQUFBLEVBQUE7QUFDQUEsbUJBQUFDLFNBQUEsQ0FBQSxJQUFBO0FBQ0EsQ0FGQTtBQ1ZBaEIsVUFBQWlCLFVBQUEsQ0FBQSxVQUFBLEVBQUEsVUFBQUMsTUFBQSxFQUFBO0FBQ0FOLFNBQUFPLEdBQUEsQ0FBQSx5QkFBQTtBQUNBRCxRQUFBRSxVQUFBLEdBQUEsWUFBQTtBQUNBUixVQUFBTyxHQUFBLENBQUFELE9BQUFHLElBQUE7QUFDQSxFQUZBO0FBR0EsQ0FMQTtBQ0FBckIsVUFBQWlCLFVBQUEsQ0FBQSxVQUFBLEVBQUEsVUFBQUMsTUFBQSxFQUFBSSxRQUFBLEVBQUE7QUFDQUEsVUFBQUMsUUFBQSxHQUNBQyxJQURBLENBQ0EsVUFBQUMsR0FBQSxFQUFBO0FBQ0FQLFNBQUFRLEtBQUEsR0FBQUQsR0FBQTtBQUNBYixVQUFBTyxHQUFBLENBQUFELE9BQUFRLEtBQUE7QUFDQSxFQUpBO0FBS0EsQ0FOQTtBQ0FBMUIsVUFBQTJCLFNBQUEsQ0FBQSxVQUFBLEVBQUEsWUFBQTtBQUNBLFFBQUE7QUFDQUMsWUFBQSxHQURBO0FBRUFDLGVBQUEsNkJBRkE7QUFHQUMsUUFBQSxjQUFBQyxLQUFBLEVBQUFDLE9BQUEsRUFBQUMsS0FBQSxFQUFBO0FBQ0EsWUFBQUMsUUFBQSxDQUFBQyxHQUFBLEVBQUE7QUFDQSxRQUFBQyxPQUFBLElBQUE7QUFBQSxRQUNBQyxTQUFBLElBREE7QUFBQSxRQUVBQyxRQUFBLENBRkE7QUFBQSxRQUdBQyxRQUFBLEVBQUFDLEdBQUEsQ0FBQSxFQUFBQyxHQUFBLENBQUEsRUFIQTtBQUFBLFFBSUFDLFNBQUFQLEdBSkE7QUFBQSxRQUtBUSxNQUFBLElBTEE7O0FBT0FQLFNBQUFRLEtBQUEsR0FBQSxFQUFBOztBQUVBUixTQUFBUyxJQUFBLEdBQUEsS0FBQTtBQUNBVCxTQUFBVSxPQUFBLEdBQUE7QUFDQUMsWUFBQSxHQURBO0FBRUFDLGNBQUEsQ0FGQTtBQUdBQyxhQUFBO0FBSEEsS0FBQTtBQUtBYixTQUFBYyxPQUFBLEdBQUEsQ0FDQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FEQSxFQUVBLENBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBRkEsQ0FBQTtBQUlBZCxTQUFBZSxTQUFBLEdBQUEsQ0FDQSxDQUFBLFNBQUEsRUFBQSx5QkFBQSxFQUFBLDBCQUFBLENBREEsRUFFQSxDQUFBLFNBQUEsRUFBQSx5QkFBQSxFQUFBLHlCQUFBLENBRkEsQ0FBQTs7QUFLQWYsU0FBQWdCLFFBQUEsR0FBQSxZQUFBO0FBQ0EsWUFBQWYsTUFBQTtBQUNBLEtBRkE7O0FBSUEsYUFBQWdCLFFBQUEsR0FBQTtBQUNBLFNBQUFDLEtBQUFDLEVBQUEsV0FBQSxDQUFBO0FBQ0EsU0FBQUMsTUFBQUYsR0FBQUcsSUFBQSxDQUFBLElBQUEsRUFBQUMsV0FBQSxFQUFBOztBQUVBdEIsVUFBQVEsS0FBQSxDQUFBLENBQUEsRUFBQWUsSUFBQSxHQUFBLEVBQUE7QUFDQSxTQUFBbEIsSUFBQWUsR0FBQTtBQUNBRixRQUFBRyxJQUFBLENBQUEsc0JBQUEsRUFBQUcsSUFBQSxDQUFBLFlBQUE7O0FBRUF4QixXQUFBUSxLQUFBLENBQUEsQ0FBQSxFQUFBZSxJQUFBLENBQUFFLElBQUEsQ0FBQSxDQUFBTixFQUFBLElBQUEsRUFBQU8sVUFBQSxLQUFBLEVBQUEsRUFBQXJCLElBQUEsRUFBQSxDQUFBOztBQUVBQSxXQUFBYyxFQUFBLElBQUEsRUFBQUcsV0FBQSxFQUFBO0FBQ0EsTUFMQTs7QUFPQXRCLFVBQUFRLEtBQUEsQ0FBQSxDQUFBLEVBQUFlLElBQUEsR0FBQSxFQUFBO0FBQ0EsU0FBQWxCLElBQUFlLEdBQUE7QUFDQUYsUUFBQUcsSUFBQSxDQUFBLHFCQUFBLEVBQUFHLElBQUEsQ0FBQSxZQUFBOztBQUVBeEIsV0FBQVEsS0FBQSxDQUFBLENBQUEsRUFBQWUsSUFBQSxDQUFBRSxJQUFBLENBQUEsQ0FBQW5CLE9BQUFxQixLQUFBLEdBQUFSLEVBQUEsSUFBQSxFQUFBTyxVQUFBLEVBQUEsR0FBQSxFQUFBLEVBQUFyQixJQUFBLEVBQUEsQ0FBQTs7QUFFQUEsV0FBQWMsRUFBQSxJQUFBLEVBQUFHLFdBQUEsRUFBQTtBQUNBLE1BTEE7QUFNQTs7QUFFQSxhQUFBTSxRQUFBLEdBQUE7QUFDQXRCLFlBQUFxQixLQUFBLEdBQUFyQixPQUFBdUIsV0FBQTtBQUNBdkIsWUFBQXdCLE1BQUEsR0FBQXhCLE9BQUF5QixZQUFBOztBQUVBLFNBQUFDLFlBQUEvQixNQUFBO0FBQ0FELFVBQUFpQyxNQUFBLENBQUEsS0FBQTtBQUNBO0FBQ0FqQyxVQUFBUSxLQUFBLENBQUEsQ0FBQSxFQUFBMEIsS0FBQSxDQUFBNUIsT0FBQXVCLFdBQUEsR0FBQSxDQUFBLEdBQUEsRUFBQTtBQUNBN0IsVUFBQVEsS0FBQSxDQUFBLENBQUEsRUFBQTBCLEtBQUEsQ0FBQTVCLE9BQUF1QixXQUFBLEdBQUEsQ0FBQSxHQUFBLEVBQUE7O0FBRUFaOztBQUVBakIsVUFBQWlDLE1BQUEsQ0FBQSxDQUFBRCxTQUFBO0FBQ0E7O0FBRUEsYUFBQUcsSUFBQSxHQUFBO0FBQ0EsU0FBQUMsU0FBQSxLQUFBO0FBQ0EsU0FBQTtBQUNBQSxlQUFBLENBQUEsRUFBQTlCLE9BQUErQixVQUFBLEtBQUE5QixNQUFBRCxPQUFBK0IsVUFBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLENBQUE7O0FBRUFyQyxXQUFBUSxLQUFBLENBQUEsQ0FBQSxJQUFBLElBQUE4QixJQUFBLENBQUEsQ0FBQSxFQUFBaEMsT0FBQXlCLFlBQUEsR0FBQSxHQUFBLEVBQUEsU0FBQSxFQUFBL0IsS0FBQVUsT0FBQSxFQUFBUCxLQUFBLENBQUE7QUFDQUgsV0FBQVEsS0FBQSxDQUFBLENBQUEsSUFBQSxJQUFBOEIsSUFBQSxDQUFBLENBQUEsRUFBQWhDLE9BQUF5QixZQUFBLEdBQUEsR0FBQSxFQUFBLFNBQUEsRUFBQS9CLEtBQUFVLE9BQUEsRUFBQVAsS0FBQSxDQUFBO0FBRUEsTUFOQSxDQU1BLE9BQUFvQyxDQUFBLEVBQUE7QUFDQSxhQUFBLEtBQUE7QUFDQTs7QUFFQXBCLE9BQUFiLE1BQUEsRUFBQWtDLFNBQUEsQ0FBQSxVQUFBRCxDQUFBLEVBQUE7O0FBRUEsVUFBQUEsRUFBQUUsT0FBQSxFQUFBO0FBQ0F0QyxhQUFBQyxDQUFBLEdBQUFtQyxFQUFBRSxPQUFBO0FBQ0F0QyxhQUFBRSxDQUFBLEdBQUFrQyxFQUFBRyxPQUFBO0FBQ0EsT0FIQSxNQUlBLElBQUFILEVBQUFJLE1BQUEsRUFBQTtBQUNBeEMsYUFBQUMsQ0FBQSxHQUFBbUMsRUFBQUksTUFBQTtBQUNBeEMsYUFBQUUsQ0FBQSxHQUFBa0MsRUFBQUssTUFBQTtBQUNBLE9BSEEsTUFJQTtBQUNBekMsYUFBQUMsQ0FBQSxHQUFBbUMsRUFBQU0sS0FBQSxHQUFBMUIsRUFBQWIsTUFBQSxFQUFBd0MsTUFBQSxHQUFBQyxJQUFBO0FBQ0E1QyxhQUFBRSxDQUFBLEdBQUFrQyxFQUFBUyxLQUFBLEdBQUE3QixFQUFBYixNQUFBLEVBQUF3QyxNQUFBLEdBQUExQixHQUFBO0FBQ0E7QUFDQSxNQWRBOztBQWdCQUQsT0FBQThCLE1BQUEsRUFBQUMsTUFBQSxDQUFBdEIsUUFBQTs7QUFFQUE7O0FBRUEsWUFBQVEsTUFBQTtBQUNBOztBQUVBLGFBQUFFLElBQUEsQ0FBQWpDLENBQUEsRUFBQXlCLE1BQUEsRUFBQXFCLEtBQUEsRUFBQXpDLE9BQUEsRUFBQVAsS0FBQSxFQUFBO0FBQ0EsU0FBQUgsT0FBQSxJQUFBOztBQUVBQSxVQUFBbUQsS0FBQSxHQUFBQSxLQUFBO0FBQ0FuRCxVQUFBVSxPQUFBLEdBQUFBLE9BQUE7QUFDQVYsVUFBQUcsS0FBQSxHQUFBQSxLQUFBO0FBQ0FILFVBQUE4QixNQUFBLEdBQUFBLE1BQUE7QUFDQTlCLFVBQUF1QixJQUFBLEdBQUEsRUFBQTtBQUNBdkIsVUFBQUssQ0FBQSxHQUFBQSxDQUFBOztBQUVBTCxVQUFBb0QsTUFBQSxHQUFBLEVBQUE7O0FBRUFwRCxVQUFBa0MsS0FBQSxHQUFBLFVBQUE5QixDQUFBLEVBQUFpRCxDQUFBLEVBQUE7QUFDQXJELFdBQUFvRCxNQUFBLEdBQUEsRUFBQTtBQUNBLFdBQUEsSUFBQS9DLElBQUFMLEtBQUFLLENBQUEsRUFBQUEsSUFBQUwsS0FBQThCLE1BQUEsRUFBQXpCLEtBQUFMLEtBQUFVLE9BQUEsQ0FBQUUsT0FBQTtBQUNBWixZQUFBb0QsTUFBQSxDQUFBM0IsSUFBQSxDQUFBLElBQUE2QixLQUFBLENBQUFsRCxDQUFBLEVBQUFDLENBQUEsRUFBQUwsS0FBQW1ELEtBQUEsQ0FBQTtBQURBO0FBRUEsTUFKQTs7QUFNQW5ELFVBQUF1RCxNQUFBLEdBQUEsWUFBQTtBQUNBLFdBQUEsSUFBQUMsSUFBQSxDQUFBLEVBQUFBLElBQUF4RCxLQUFBb0QsTUFBQSxDQUFBSyxNQUFBLEVBQUFELEdBQUE7QUFDQXhELFlBQUFvRCxNQUFBLENBQUFJLENBQUEsRUFBQUQsTUFBQSxDQUFBdkQsS0FBQUcsS0FBQSxFQUFBSCxLQUFBVSxPQUFBO0FBREE7QUFFQSxNQUhBOztBQUtBLGNBQUE0QyxLQUFBLENBQUFsRCxDQUFBLEVBQUFDLENBQUEsRUFBQTtBQUNBLFdBQUFBLENBQUEsR0FBQUEsQ0FBQTtBQUNBLFdBQUFELENBQUEsR0FBQUEsQ0FBQTtBQUNBLFdBQUFzRCxJQUFBLEdBQUEsRUFBQXRELEdBQUFBLENBQUEsRUFBQUMsR0FBQUEsQ0FBQSxFQUFBOztBQUVBLFdBQUFrRCxNQUFBLEdBQUEsVUFBQXBELEtBQUEsRUFBQU8sT0FBQSxFQUFBO0FBQ0EsV0FBQWlELEtBQUEsS0FBQXZELENBQUEsR0FBQUQsTUFBQUMsQ0FBQTtBQUFBLFdBQ0F3RCxLQUFBLEtBQUF2RCxDQUFBLEdBQUFGLE1BQUFFLENBREE7QUFBQSxXQUVBd0QsUUFBQUMsS0FBQUMsS0FBQSxDQUFBSixFQUFBLEVBQUFDLEVBQUEsQ0FGQTtBQUFBLFdBR0FDLFFBQUFBLFFBQUEsQ0FBQSxHQUFBQSxLQUFBLEdBQUEsSUFBQUMsS0FBQUUsRUFBQSxHQUFBSCxLQUhBO0FBQUEsV0FJQUksSUFBQXZELFFBQUFHLE1BQUEsR0FBQWlELEtBQUFJLElBQUEsQ0FBQVAsS0FBQUEsRUFBQSxHQUFBQyxLQUFBQSxFQUFBLENBSkE7O0FBTUEsWUFBQXZELENBQUEsSUFBQXlELEtBQUFLLEdBQUEsQ0FBQU4sS0FBQSxJQUFBSSxDQUFBLEdBQUEsQ0FBQSxLQUFBUCxJQUFBLENBQUFyRCxDQUFBLEdBQUEsS0FBQUEsQ0FBQSxJQUFBSyxRQUFBQyxLQUFBO0FBQ0EsWUFBQVAsQ0FBQSxJQUFBMEQsS0FBQU0sR0FBQSxDQUFBUCxLQUFBLElBQUFJLENBQUEsR0FBQSxDQUFBLEtBQUFQLElBQUEsQ0FBQXRELENBQUEsR0FBQSxLQUFBQSxDQUFBLElBQUFNLFFBQUFDLEtBQUE7QUFDQSxPQVRBO0FBVUE7QUFDQTs7QUFFQSxhQUFBMEQsVUFBQSxDQUFBQyxDQUFBLEVBQUFDLENBQUEsRUFBQXBCLEtBQUEsRUFBQTtBQUNBNUMsU0FBQWlFLFNBQUEsR0FBQXJCLEtBQUE7QUFDQTVDLFNBQUFrRSxTQUFBO0FBQ0FsRSxTQUFBbUUsR0FBQSxDQUFBSixFQUFBbEUsQ0FBQSxFQUFBa0UsRUFBQWpFLENBQUEsRUFBQWtFLENBQUEsRUFBQSxDQUFBLEVBQUEsSUFBQVQsS0FBQUUsRUFBQSxFQUFBLElBQUE7QUFDQXpELFNBQUFvRSxTQUFBO0FBQ0FwRSxTQUFBcUUsSUFBQTtBQUNBOztBQUVBLGFBQUFDLFFBQUEsQ0FBQUMsRUFBQSxFQUFBQyxFQUFBLEVBQUE7QUFDQXhFLFNBQUFrRSxTQUFBO0FBQ0FsRSxTQUFBeUUsTUFBQSxDQUFBRixHQUFBMUUsQ0FBQSxFQUFBMEUsR0FBQXpFLENBQUE7QUFDQUUsU0FBQTBFLE1BQUEsQ0FBQUYsR0FBQTNFLENBQUEsRUFBQTJFLEdBQUExRSxDQUFBO0FBQ0FFLFNBQUEyRSxNQUFBO0FBQ0EzRSxTQUFBb0UsU0FBQTtBQUNBOztBQUVBLGFBQUFRLE1BQUEsR0FBQTtBQUNBNUUsU0FBQTZFLFNBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBOUUsT0FBQXFCLEtBQUEsRUFBQXJCLE9BQUF3QixNQUFBOztBQUVBLFVBQUEsSUFBQTBCLElBQUEsQ0FBQSxFQUFBQSxJQUFBLENBQUEsRUFBQUEsR0FBQSxFQUFBO0FBQ0EsVUFBQUosU0FBQXBELEtBQUFRLEtBQUEsQ0FBQWdELENBQUEsRUFBQUosTUFBQTs7QUFFQTdDLFVBQUFrRSxTQUFBO0FBQ0FsRSxVQUFBOEUsU0FBQSxHQUFBLENBQUE7QUFDQTlFLFVBQUErRSxXQUFBLEdBQUF0RixLQUFBUSxLQUFBLENBQUFnRCxDQUFBLEVBQUFMLEtBQUE7QUFDQTVDLFVBQUF5RSxNQUFBLENBQUE1QixPQUFBLEVBQUEsRUFBQWhELENBQUEsRUFBQWdELE9BQUEsRUFBQSxFQUFBL0MsQ0FBQTs7QUFFQSxXQUFBLElBQUFrRixJQUFBLEVBQUEsRUFBQUEsSUFBQW5DLE9BQUFLLE1BQUEsR0FBQSxDQUFBLEVBQUE4QixHQUFBLEVBQUE7QUFDQSxXQUFBQyxRQUFBcEMsT0FBQW1DLENBQUEsQ0FBQTs7QUFFQSxXQUFBRSxLQUFBLENBQUFyQyxPQUFBbUMsSUFBQSxDQUFBLEVBQUFuRixDQUFBLEdBQUFvRixNQUFBcEYsQ0FBQSxJQUFBLENBQUE7QUFDQSxXQUFBc0YsS0FBQSxDQUFBdEMsT0FBQW1DLElBQUEsQ0FBQSxFQUFBbEYsQ0FBQSxHQUFBbUYsTUFBQW5GLENBQUEsSUFBQSxDQUFBOztBQUdBRSxXQUFBb0YsZ0JBQUEsQ0FBQUgsTUFBQXBGLENBQUEsRUFBQW9GLE1BQUFuRixDQUFBLEVBQUFvRixFQUFBLEVBQUFDLEVBQUE7QUFDQTtBQUNBbkYsVUFBQTJFLE1BQUE7QUFDQTNFLFVBQUFvRSxTQUFBOztBQUdBO0FBQ0FwRSxVQUFBOEUsU0FBQSxHQUFBLEdBQUE7QUFDQTlFLFVBQUErRSxXQUFBLEdBQUF0RixLQUFBZSxTQUFBLENBQUF5QyxDQUFBLEVBQUEsQ0FBQSxDQUFBO0FBQ0EsV0FBQSxJQUFBK0IsSUFBQSxDQUFBLEVBQUFBLElBQUF2RixLQUFBUSxLQUFBLENBQUFnRCxDQUFBLEVBQUFqQyxJQUFBLENBQUFrQyxNQUFBLEVBQUE4QixHQUFBLEVBQUE7QUFDQSxXQUFBSyxNQUFBNUYsS0FBQVEsS0FBQSxDQUFBZ0QsQ0FBQSxFQUFBakMsSUFBQSxDQUFBZ0UsQ0FBQSxDQUFBO0FBQUEsV0FDQU0sS0FBQTdGLEtBQUFjLE9BQUEsQ0FBQTBDLENBQUEsRUFBQStCLENBQUEsQ0FEQTtBQUVBTyxjQUFBLENBQ0EsQ0FBQTlGLEtBQUFRLEtBQUEsQ0FBQWdELENBQUEsRUFBQUosTUFBQSxDQUFBeUMsRUFBQSxFQUFBekYsQ0FBQSxHQUFBSixLQUFBUSxLQUFBLENBQUFnRCxDQUFBLEVBQUFKLE1BQUEsQ0FBQXlDLEtBQUEsQ0FBQSxFQUFBekYsQ0FBQSxJQUFBLENBREEsRUFFQSxDQUFBSixLQUFBUSxLQUFBLENBQUFnRCxDQUFBLEVBQUFKLE1BQUEsQ0FBQXlDLEVBQUEsRUFBQXhGLENBQUEsR0FBQUwsS0FBQVEsS0FBQSxDQUFBZ0QsQ0FBQSxFQUFBSixNQUFBLENBQUF5QyxLQUFBLENBQUEsRUFBQXhGLENBQUEsSUFBQSxDQUZBLENBQUE7O0FBS0EsV0FBQXlFLEtBQUEsRUFBQTFFLEdBQUF3RixJQUFBLENBQUEsQ0FBQSxFQUFBdkYsR0FBQXVGLElBQUEsQ0FBQSxDQUFBLEVBQUE7QUFDQSxXQUFBYixLQUFBLEVBQUEzRSxHQUFBMEYsS0FBQSxDQUFBLENBQUEsRUFBQXpGLEdBQUF5RixLQUFBLENBQUEsQ0FBQSxFQUFBOztBQUdBakIsZ0JBQUFDLEVBQUEsRUFBQUMsRUFBQTtBQUNBVixrQkFBQVMsRUFBQSxFQUFBLENBQUEsRUFBQTlFLEtBQUFlLFNBQUEsQ0FBQXlDLENBQUEsRUFBQSxDQUFBLENBQUE7O0FBRUFhLGtCQUFBVSxFQUFBLEVBQUEsRUFBQSxFQUFBL0UsS0FBQWUsU0FBQSxDQUFBeUMsQ0FBQSxFQUFBLENBQUEsQ0FBQTtBQUNBYSxrQkFBQVUsRUFBQSxFQUFBLEdBQUEsRUFBQS9FLEtBQUFlLFNBQUEsQ0FBQXlDLENBQUEsRUFBQSxDQUFBLENBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBQXVDLE9BQUEsR0FBQTtBQUNBN0YsYUFBQThGLHNCQUFBRCxPQUFBLENBQUE7O0FBRUEvRixVQUFBUSxLQUFBLENBQUEsQ0FBQSxFQUFBK0MsTUFBQTtBQUNBdkQsVUFBQVEsS0FBQSxDQUFBLENBQUEsRUFBQStDLE1BQUE7O0FBRUE0QjtBQUNBOztBQUVBbkYsU0FBQWlDLE1BQUEsR0FBQSxVQUFBbEUsR0FBQSxFQUFBO0FBQ0EsU0FBQSxDQUFBaUMsS0FBQVMsSUFBQSxFQUFBLE9BQUEsS0FBQTs7QUFFQSxTQUFBMUMsUUFBQWtJLFNBQUEsRUFDQWpHLEtBQUFpQyxNQUFBLENBQUEsQ0FBQWhDLE1BQUEsRUFEQSxLQUdBLElBQUEsQ0FBQSxDQUFBbEMsR0FBQSxJQUFBa0MsTUFBQSxFQUFBO0FBQ0FBLGVBQUEsS0FBQTtBQUNBOEY7QUFDQSxNQUhBLE1BSUEsSUFBQSxDQUFBLENBQUEsQ0FBQWhJLEdBQUEsRUFBQTtBQUNBa0MsZUFBQSxJQUFBO0FBQ0FpRywyQkFBQWhHLEtBQUE7QUFDQTtBQUNBLFlBQUEsSUFBQTtBQUNBLEtBZkE7O0FBa0JBRixTQUFBUyxJQUFBLEdBQUEwQixNQUFBO0FBQ0E7QUFDQSxPQUFBckMsUUFBQSxDQUFBcUIsRUFBQSxPQUFBLEVBQUFnRixHQUFBLENBQUEsQ0FBQSxDQUFBLEVBQUFsRSxNQUFBLENBQUEsSUFBQTtBQUNBO0FBalBBLEVBQUE7QUFtUEEsQ0FwUEE7O0FDQUFyRSxVQUFBd0ksT0FBQSxDQUFBLFVBQUEsRUFBQSxVQUFBQyxLQUFBLEVBQUE7QUFDQSxLQUFBQyxhQUFBLEVBQUE7QUFDQUEsWUFBQW5ILFFBQUEsR0FBQSxZQUFBO0FBQ0EsU0FBQWtILE1BQUFGLEdBQUEsQ0FBQSxtQ0FBQSxFQUFBO0FBQ0FJLGFBQUEsUUFEQTtBQUVBQyxhQUFBO0FBRkEsR0FBQSxFQUlBcEgsSUFKQSxDQUlBO0FBQUEsVUFBQUMsSUFBQW9ILElBQUE7QUFBQSxHQUpBLENBQUE7QUFLQSxFQU5BO0FBT0EsUUFBQUgsVUFBQTtBQUNBLENBVkE7QUNBQTs7QUFFQTFJLFVBQUFjLE1BQUEsQ0FBQSxVQUFBZ0ksY0FBQSxFQUFBO0FBQ0FBLGdCQUFBQyxLQUFBLENBQUEsU0FBQSxFQUFBO0FBQ0FDLE9BQUEsVUFEQTtBQUVBbkgsZUFBQTtBQUZBLEVBQUE7QUFJQSxDQUxBO0FDRkE7O0FBRUE3QixVQUFBYyxNQUFBLENBQUEsVUFBQWdJLGNBQUEsRUFBQTtBQUNBQSxnQkFBQUMsS0FBQSxDQUFBLFNBQUEsRUFBQTtBQUNBQyxPQUFBLFVBREE7QUFFQW5ILGVBQUE7QUFGQSxFQUFBO0FBSUEsQ0FMQTtBQ0ZBN0IsVUFBQWMsTUFBQSxDQUFBLFVBQUFnSSxjQUFBLEVBQUE7QUFDQUEsZ0JBQUFDLEtBQUEsQ0FBQSxRQUFBLEVBQUE7QUFDQUMsT0FBQSxHQURBO0FBRUFuSCxlQUFBO0FBRkEsRUFBQTtBQUlBLENBTEE7QUNBQTs7QUFFQTdCLFVBQUFjLE1BQUEsQ0FBQSxVQUFBZ0ksY0FBQSxFQUFBO0FBQ0FBLGdCQUFBQyxLQUFBLENBQUEsVUFBQSxFQUFBO0FBQ0FDLE9BQUEsV0FEQTtBQUVBbkgsZUFBQSwwQkFGQTtBQUdBWixjQUFBO0FBSEEsRUFBQTtBQU1BLENBUEE7QUNGQTs7QUFFQWpCLFVBQUFjLE1BQUEsQ0FBQSxVQUFBZ0ksY0FBQSxFQUFBO0FBQ0FBLGdCQUFBQyxLQUFBLENBQUEsVUFBQSxFQUFBO0FBQ0FDLE9BQUEsV0FEQTtBQUVBbkgsZUFBQTtBQUZBLEVBQUE7QUFJQSxDQUxBO0FDRkE7O0FBRUE3QixVQUFBYyxNQUFBLENBQUEsVUFBQWdJLGNBQUEsRUFBQTtBQUNBQSxnQkFBQUMsS0FBQSxDQUFBLE1BQUEsRUFBQTtBQUNBQyxPQUFBLE9BREE7QUFFQW5ILGVBQUE7QUFGQSxFQUFBO0FBSUEsQ0FMQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBwb3J0Zm9saW8gPSBhbmd1bGFyLm1vZHVsZSgncG9ydGZvbGlvJywgWyd1aS5yb3V0ZXInXSlcblxucG9ydGZvbGlvLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuXHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlRXJyb3InLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMsIGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcignRXJyb3IgVHJhbnNpdGlvbmluZyBGcm9tJyArIGZyb21TdGF0ZS5uYW1lICsgXCJ0b1wiICsgdG9TdGF0ZS5uYW1lICsgXCI6XCIgKyBlcnJvcik7XG5cdH0pXG59KTtcblxucG9ydGZvbGlvLmNvbmZpZyhmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIpe1xuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59KSIsInBvcnRmb2xpby5jb250cm9sbGVyKCdmb3JtQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcblx0Y29uc29sZS5sb2coJ2hpdHRpbmcgZm9ybSBjb250cm9sbGVyJylcblx0JHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0Y29uc29sZS5sb2coJHNjb3BlLmZvcm0pXG5cdH1cbn0pIiwicG9ydGZvbGlvLmNvbnRyb2xsZXIoJ3Byb2pDVFJMJywgZnVuY3Rpb24gKCRzY29wZSwgcHJvamVjdHMpIHtcblx0cHJvamVjdHMuZ2V0UmVwb3MoKVxuXHQudGhlbihmdW5jdGlvbiAoYXJyKXtcblx0XHQkc2NvcGUucmVwb3MgPSBhcnI7XG5cdFx0Y29uc29sZS5sb2coJHNjb3BlLnJlcG9zKVxuXHR9KVxufSkiLCJwb3J0Zm9saW8uZGlyZWN0aXZlKCd0aW1lbGluZScsIGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdHRlbXBsYXRlVXJsOiAnanMvZGlyZWN0aXZlcy90aW1lbGluZS5odG1sJyxcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRmdW5jdGlvbiBUaW1lbGluZShjdnMpIHtcblx0XHRcdCAgICB2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHQgICAgICAgIHBhdXNlZCA9IHRydWUsXG5cdFx0XHQgICAgICAgIHJhZmlkID0gMCxcblx0XHRcdCAgICAgICAgbW91c2UgPSB7IHg6IDAsIHk6IDAgfSxcblx0XHRcdCAgICAgICAgY2FudmFzID0gY3ZzLFxuXHRcdFx0ICAgICAgICBjdHggPSBudWxsO1xuXG5cdFx0XHQgICAgc2VsZi5saW5lcyA9IFtdO1xuXG5cdFx0XHQgICAgc2VsZi5pc09LID0gZmFsc2U7XG5cdFx0XHQgICAgc2VsZi5vcHRpb25zID0ge1xuXHRcdFx0ICAgICAgICBzcGVlZDogMC4xLFxuXHRcdFx0ICAgICAgICBkZW5zaXR5OiA4LFxuXHRcdFx0ICAgICAgICByYWRpdXM6IDYwMCxcblx0XHRcdCAgICB9O1xuXHRcdFx0ICAgIHNlbGYudGFyZ2V0cyA9IFtcblx0XHRcdCAgICAgICAgWzI5LCAzMiwgNDgsIDY4XSxcblx0XHRcdCAgICAgICAgWzI5LCAzMywgMzhdXG5cdFx0XHQgICAgXTtcblx0XHRcdCAgICBzZWxmLmRvdENvbG9ycyA9IFtcblx0XHRcdCAgICAgICAgWycjMTM2NjliJywgJ3JnYmEoMTksIDEwMiwgMTU1LCAwLjMpJywgJ3JnYmEoMTksIDEwMiwgMTU1LCAwLjA4KSddLFxuXHRcdFx0ICAgICAgICBbJyM3ZGQzMTcnLCAncmdiYSgxMTMsIDIyMiwgMTUsIDAuMyknLCAncmdiYSg5MSwgMTY0LCAyMiwgMC4xMiknXSxcblx0XHRcdCAgICBdO1xuXG5cdFx0XHQgICAgc2VsZi5pc1BhdXNlZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICAgICAgcmV0dXJuIHBhdXNlZDtcblx0XHRcdCAgICB9O1xuXG5cdFx0XHQgICAgZnVuY3Rpb24gSW5pdERvdHMoKSB7XG5cdFx0XHQgICAgICAgIHZhciB0bCA9ICQoJy50aW1lbGluZScpO1xuXHRcdFx0ICAgICAgICB2YXIgdG9wID0gdGwuZmluZCgnaDInKS5vdXRlckhlaWdodCgpO1xuXG5cdFx0XHQgICAgICAgIHNlbGYubGluZXNbMF0uZG90cyA9IFtdO1xuXHRcdFx0ICAgICAgICB2YXIgeSA9IHRvcDtcblx0XHRcdCAgICAgICAgdGwuZmluZCgnYXJ0aWNsZTpmaXJzdCBmaWd1cmUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0ICAgICAgICAgICAgc2VsZi5saW5lc1swXS5kb3RzLnB1c2goWyQodGhpcykub3V0ZXJXaWR0aCgpICsgMjAsIHkgKyAyMF0pO1xuXG5cdFx0XHQgICAgICAgICAgICB5ICs9ICQodGhpcykub3V0ZXJIZWlnaHQoKTtcblx0XHRcdCAgICAgICAgfSk7XG5cblx0XHRcdCAgICAgICAgc2VsZi5saW5lc1sxXS5kb3RzID0gW107XG5cdFx0XHQgICAgICAgIHZhciB5ID0gdG9wO1xuXHRcdFx0ICAgICAgICB0bC5maW5kKCdhcnRpY2xlOmxhc3QgZmlndXJlJykuZWFjaChmdW5jdGlvbiAoKSB7XG5cblx0XHRcdCAgICAgICAgICAgIHNlbGYubGluZXNbMV0uZG90cy5wdXNoKFtjYW52YXMud2lkdGggLSAkKHRoaXMpLm91dGVyV2lkdGgoKSAtIDIwLCB5ICsgMjBdKTtcblxuXHRcdFx0ICAgICAgICAgICAgeSArPSAkKHRoaXMpLm91dGVySGVpZ2h0KCk7XG5cdFx0XHQgICAgICAgIH0pO1xuXHRcdFx0ICAgIH1cblxuXHRcdFx0ICAgIGZ1bmN0aW9uIE9uUmVzaXplKCkge1xuXHRcdFx0ICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMub2Zmc2V0V2lkdGg7XG5cdFx0XHQgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjYW52YXMub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0XHQgICAgICAgIHZhciB3YXNQYXVzZWQgPSBwYXVzZWQ7XG5cdFx0XHQgICAgICAgIHNlbGYudG9nZ2xlKGZhbHNlKTtcblx0XHRcdCAgICAgICAgLy8gSW5pdCBsaW5lc1xuXHRcdFx0ICAgICAgICBzZWxmLmxpbmVzWzBdLnJlc2V0KGNhbnZhcy5vZmZzZXRXaWR0aCAvIDIgLSAxNSk7XG5cdFx0XHQgICAgICAgIHNlbGYubGluZXNbMV0ucmVzZXQoY2FudmFzLm9mZnNldFdpZHRoIC8gMiArIDE1KTtcblxuXHRcdFx0ICAgICAgICBJbml0RG90cygpO1xuXG5cdFx0XHQgICAgICAgIHNlbGYudG9nZ2xlKCF3YXNQYXVzZWQpO1xuXHRcdFx0ICAgIH1cblxuXHRcdFx0ICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XHQgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0XHRcdCAgICAgICAgdHJ5IHtcblx0XHRcdCAgICAgICAgICAgIHJlc3VsdCA9ICEhKGNhbnZhcy5nZXRDb250ZXh0ICYmIChjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSkpO1xuXG5cdFx0XHQgICAgICAgICAgICBzZWxmLmxpbmVzWzBdID0gbmV3IExpbmUoMCwgY2FudmFzLm9mZnNldEhlaWdodCAtIDEwMCwgJyM0Nzg5YTMnLCBzZWxmLm9wdGlvbnMsIG1vdXNlKTtcblx0XHRcdCAgICAgICAgICAgIHNlbGYubGluZXNbMV0gPSBuZXcgTGluZSgwLCBjYW52YXMub2Zmc2V0SGVpZ2h0IC0gMTAwLCAnI2EwZDU5YycsIHNlbGYub3B0aW9ucywgbW91c2UpO1xuXG5cdFx0XHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0XHRcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0XHRcdCAgICAgICAgfVxuXG5cdFx0XHQgICAgICAgICQoY2FudmFzKS5tb3VzZW1vdmUoZnVuY3Rpb24gKGUpIHtcblxuXHRcdFx0ICAgICAgICAgICAgaWYgKGUub2Zmc2V0WCkge1xuXHRcdFx0ICAgICAgICAgICAgICAgIG1vdXNlLnggPSBlLm9mZnNldFg7XG5cdFx0XHQgICAgICAgICAgICAgICAgbW91c2UueSA9IGUub2Zmc2V0WTtcblx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgICAgIGVsc2UgaWYgKGUubGF5ZXJYKSB7XG5cdFx0XHQgICAgICAgICAgICAgICAgbW91c2UueCA9IGUubGF5ZXJYO1xuXHRcdFx0ICAgICAgICAgICAgICAgIG1vdXNlLnkgPSBlLmxheWVyWTtcblx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgICAgIGVsc2Uge1xuXHRcdFx0ICAgICAgICAgICAgICAgIG1vdXNlLnggPSBlLnBhZ2VYIC0gJChjYW52YXMpLm9mZnNldCgpLmxlZnQ7XG5cdFx0XHQgICAgICAgICAgICAgICAgbW91c2UueSA9IGUucGFnZVkgLSAkKGNhbnZhcykub2Zmc2V0KCkudG9wO1xuXHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0ICAgICAgICB9KTtcblxuXHRcdFx0ICAgICAgICAkKHdpbmRvdykucmVzaXplKE9uUmVzaXplKTtcblxuXHRcdFx0ICAgICAgICBPblJlc2l6ZSgpO1xuXG5cdFx0XHQgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdFx0XHQgICAgfVxuXG5cdFx0XHQgICAgZnVuY3Rpb24gTGluZSh5LCBoZWlnaHQsIGNvbG9yLCBvcHRpb25zLCBtb3VzZSkge1xuXHRcdFx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdCAgICAgICAgc2VsZi5jb2xvciA9IGNvbG9yO1xuXHRcdFx0ICAgICAgICBzZWxmLm9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdFx0ICAgICAgICBzZWxmLm1vdXNlID0gbW91c2U7XG5cdFx0XHQgICAgICAgIHNlbGYuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcdFx0ICAgICAgICBzZWxmLmRvdHMgPSBbXTtcblx0XHRcdCAgICAgICAgc2VsZi55ID0geTtcblxuXHRcdFx0ICAgICAgICBzZWxmLnBvaW50cyA9IFtdO1xuXG5cdFx0XHQgICAgICAgIHNlbGYucmVzZXQgPSBmdW5jdGlvbiAoeCwgZikge1xuXHRcdFx0ICAgICAgICAgICAgc2VsZi5wb2ludHMgPSBbXTtcblx0XHRcdCAgICAgICAgICAgIGZvciAodmFyIHkgPSBzZWxmLnk7IHkgPCBzZWxmLmhlaWdodDsgeSArPSBzZWxmLm9wdGlvbnMuZGVuc2l0eSlcblx0XHRcdCAgICAgICAgICAgICAgICBzZWxmLnBvaW50cy5wdXNoKG5ldyBQb2ludCh4LCB5LCBzZWxmLmNvbG9yKSk7XG5cdFx0XHQgICAgICAgIH1cblxuXHRcdFx0ICAgICAgICBzZWxmLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5wb2ludHMubGVuZ3RoOyBpKyspXG5cdFx0XHQgICAgICAgICAgICAgICAgc2VsZi5wb2ludHNbaV0udXBkYXRlKHNlbGYubW91c2UsIHNlbGYub3B0aW9ucyk7XG5cdFx0XHQgICAgICAgIH1cblxuXHRcdFx0ICAgICAgICBmdW5jdGlvbiBQb2ludCh4LCB5KSB7XG5cdFx0XHQgICAgICAgICAgICB0aGlzLnkgPSB5O1xuXHRcdFx0ICAgICAgICAgICAgdGhpcy54ID0geDtcblx0XHRcdCAgICAgICAgICAgIHRoaXMuYmFzZSA9IHsgeDogeCwgeTogeSB9O1xuXG5cdFx0XHQgICAgICAgICAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uIChtb3VzZSwgb3B0aW9ucykge1xuXHRcdFx0ICAgICAgICAgICAgICAgIHZhciBkeCA9IHRoaXMueCAtIG1vdXNlLngsXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIGR5ID0gdGhpcy55IC0gbW91c2UueSxcblx0XHRcdCAgICAgICAgICAgICAgICAgICAgYWxwaGEgPSBNYXRoLmF0YW4yKGR4LCBkeSksXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIGFscGhhID0gKGFscGhhID4gMCA/IGFscGhhIDogMiAqIE1hdGguUEkgKyBhbHBoYSksXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIGQgPSBvcHRpb25zLnJhZGl1cyAvIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG5cblx0XHRcdCAgICAgICAgICAgICAgICB0aGlzLnkgKz0gTWF0aC5jb3MoYWxwaGEpICogZCArICh0aGlzLmJhc2UueSAtIHRoaXMueSkgKiBvcHRpb25zLnNwZWVkO1xuXHRcdFx0ICAgICAgICAgICAgICAgIHRoaXMueCArPSBNYXRoLnNpbihhbHBoYSkgKiBkICsgKHRoaXMuYmFzZS54IC0gdGhpcy54KSAqIG9wdGlvbnMuc3BlZWQ7XG5cdFx0XHQgICAgICAgICAgICB9XG5cdFx0XHQgICAgICAgIH1cblx0XHRcdCAgICB9XG5cblx0XHRcdCAgICBmdW5jdGlvbiBkcmF3Q2lyY2xlKHAsIHIsIGNvbG9yKSB7XG5cdFx0XHQgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcblx0XHRcdCAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXHRcdFx0ICAgICAgICBjdHguYXJjKHAueCwgcC55LCByLCAwLCAyICogTWF0aC5QSSwgdHJ1ZSk7XG5cdFx0XHQgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcblx0XHRcdCAgICAgICAgY3R4LmZpbGwoKTtcblx0XHRcdCAgICB9XG5cblx0XHRcdCAgICBmdW5jdGlvbiBkcmF3TGluZShwMSwgcDIpIHtcblx0XHRcdCAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXHRcdFx0ICAgICAgICBjdHgubW92ZVRvKHAxLngsIHAxLnkpO1xuXHRcdFx0ICAgICAgICBjdHgubGluZVRvKHAyLngsIHAyLnkpO1xuXHRcdFx0ICAgICAgICBjdHguc3Ryb2tlKCk7XG5cdFx0XHQgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcblx0XHRcdCAgICB9XG5cblx0XHRcdCAgICBmdW5jdGlvbiByZWRyYXcoKSB7XG5cdFx0XHQgICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuXHRcdFx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDI7IGkrKykge1xuXHRcdFx0ICAgICAgICAgICAgdmFyIHBvaW50cyA9IHNlbGYubGluZXNbaV0ucG9pbnRzO1xuXG5cdFx0XHQgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG5cdFx0XHQgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcblx0XHRcdCAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHNlbGYubGluZXNbaV0uY29sb3I7XG5cdFx0XHQgICAgICAgICAgICBjdHgubW92ZVRvKHBvaW50c1sxNV0ueCwgcG9pbnRzWzE1XS55KTtcblxuXHRcdFx0ICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE1OyBqIDwgcG9pbnRzLmxlbmd0aCAtIDI7IGorKykge1xuXHRcdFx0ICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBvaW50c1tqXTtcblxuXHRcdFx0ICAgICAgICAgICAgICAgIHZhciB4YyA9IChwb2ludHNbaiArIDFdLnggKyBwb2ludC54KSAvIDI7XG5cdFx0XHQgICAgICAgICAgICAgICAgdmFyIHljID0gKHBvaW50c1tqICsgMV0ueSArIHBvaW50LnkpIC8gMjtcblxuXG5cdFx0XHQgICAgICAgICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8ocG9pbnQueCwgcG9pbnQueSwgeGMsIHljKTtcblx0XHRcdCAgICAgICAgICAgIH1cblx0XHRcdCAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcblx0XHRcdCAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcblxuXG5cdFx0XHQgICAgICAgICAgICAvLyBEb3RzXG5cdFx0XHQgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMS4yO1xuXHRcdFx0ICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc2VsZi5kb3RDb2xvcnNbaV1bMl07XG5cdFx0XHQgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlbGYubGluZXNbaV0uZG90cy5sZW5ndGg7IGorKykge1xuXHRcdFx0ICAgICAgICAgICAgICAgIHZhciBkb3QgPSBzZWxmLmxpbmVzW2ldLmRvdHNbal0sXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIGlkID0gc2VsZi50YXJnZXRzW2ldW2pdO1xuXHRcdFx0ICAgICAgICAgICAgICAgICAgICBkb3QyID0gW1xuXHRcdFx0ICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYubGluZXNbaV0ucG9pbnRzW2lkXS54ICsgc2VsZi5saW5lc1tpXS5wb2ludHNbaWQgKyAxXS54KSAvIDIsXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi5saW5lc1tpXS5wb2ludHNbaWRdLnkgKyBzZWxmLmxpbmVzW2ldLnBvaW50c1tpZCArIDFdLnkpIC8gMixcblx0XHRcdCAgICAgICAgICAgICAgICAgICAgXTtcblxuXHRcdFx0ICAgICAgICAgICAgICAgIHZhciBwMSA9IHsgeDogZG90WzBdLCB5OiBkb3RbMV0gfTtcblx0XHRcdCAgICAgICAgICAgICAgICB2YXIgcDIgPSB7IHg6IGRvdDJbMF0sIHk6IGRvdDJbMV0gfTtcblxuXG5cdFx0XHQgICAgICAgICAgICAgICAgZHJhd0xpbmUocDEsIHAyKTtcblx0XHRcdCAgICAgICAgICAgICAgICBkcmF3Q2lyY2xlKHAxLCAzLCBzZWxmLmRvdENvbG9yc1tpXVswXSk7XG5cblx0XHRcdCAgICAgICAgICAgICAgICBkcmF3Q2lyY2xlKHAyLCAxMSwgc2VsZi5kb3RDb2xvcnNbaV1bMV0pO1xuXHRcdFx0ICAgICAgICAgICAgICAgIGRyYXdDaXJjbGUocDIsIDUuNSwgc2VsZi5kb3RDb2xvcnNbaV1bMF0pO1xuXHRcdFx0ICAgICAgICAgICAgfVxuXHRcdFx0ICAgICAgICB9XG5cdFx0XHQgICAgfVxuXG5cdFx0XHQgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcblx0XHRcdCAgICAgICAgcmFmaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG5cblx0XHRcdCAgICAgICAgc2VsZi5saW5lc1swXS51cGRhdGUoKTtcblx0XHRcdCAgICAgICAgc2VsZi5saW5lc1sxXS51cGRhdGUoKTtcblxuXHRcdFx0ICAgICAgICByZWRyYXcoKTtcblx0XHRcdCAgICB9XG5cblx0XHRcdCAgICBzZWxmLnRvZ2dsZSA9IGZ1bmN0aW9uIChydW4pIHtcblx0XHRcdCAgICAgICAgaWYgKCFzZWxmLmlzT0spIHJldHVybiBmYWxzZTtcblxuXHRcdFx0ICAgICAgICBpZiAocnVuID09PSB1bmRlZmluZWQpXG5cdFx0XHQgICAgICAgICAgICBzZWxmLnRvZ2dsZSghcGF1c2VkKTtcblxuXHRcdFx0ICAgICAgICBlbHNlIGlmICghIXJ1biAmJiBwYXVzZWQpIHtcblx0XHRcdCAgICAgICAgICAgIHBhdXNlZCA9IGZhbHNlO1xuXHRcdFx0ICAgICAgICAgICAgYW5pbWF0ZSgpO1xuXHRcdFx0ICAgICAgICB9XG5cdFx0XHQgICAgICAgIGVsc2UgaWYgKCEhIXJ1bikge1xuXHRcdFx0ICAgICAgICAgICAgcGF1c2VkID0gdHJ1ZTtcblx0XHRcdCAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJhZmlkKTtcblx0XHRcdCAgICAgICAgfVxuXHRcdFx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0XHRcdCAgICB9XG5cblxuXHRcdFx0ICAgIHNlbGYuaXNPSyA9IGluaXQoKTtcblx0XHRcdH1cblx0XHRcdG5ldyBUaW1lbGluZSgkKCcjY3ZzMycpLmdldCgwKSkudG9nZ2xlKHRydWUpO1xuXHRcdH1cblx0fVxufSlcblxuIiwicG9ydGZvbGlvLmZhY3RvcnkoJ3Byb2plY3RzJywgZnVuY3Rpb24gKCRodHRwKSB7XG5cdHZhciBmYWN0b3J5T2JqID0ge307XG5cdGZhY3RvcnlPYmouZ2V0UmVwb3MgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuICRodHRwLmdldCgnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyL3JlcG9zJywge1xuXHRcdFx0dXNlcm5hbWU6ICdtb3NhbmUnLFxuXHRcdFx0cGFzc3dvcmQ6ICd4eHh4eHh4eHgnXG5cdFx0fSlcblx0XHQudGhlbihhcnIgPT4gYXJyLmRhdGEpXG5cdH1cblx0cmV0dXJuIGZhY3RvcnlPYmo7XG59KVx0IiwiJ3VzZSBzdHJpY3QnO1xuXG5wb3J0Zm9saW8uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdjbGllbnRzJywge1xuICAgICAgICB1cmw6ICcvY2xpZW50cycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2NsaWVudHMuaHRtbCdcbiAgICB9KVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5wb3J0Zm9saW8uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnY29udGFjdCcsIHtcblx0XHR1cmw6ICcvY29udGFjdCcsXG5cdFx0dGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvY29udGFjdC5odG1sJ1xuXHR9KVxufSkiLCJwb3J0Zm9saW8uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnaGVhZGVyJywge1xuXHRcdHVybDogJy8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy9oZWFkZXIuaHRtbCdcblx0fSlcbn0pIiwiJ3VzZSBzdHJpY3QnO1xuXG5wb3J0Zm9saW8uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgncHJvamVjdHMnLCB7XG5cdFx0dXJsOicvcHJvamVjdHMnLFxuXHRcdHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3BvcnRmb2xpby5odG1sJyxcblx0XHRjb250cm9sbGVyOiAncHJvakNUUkwnXG5cdFx0fVxuXHQpXG59KSIsIid1c2Ugc3RyaWN0JztcblxucG9ydGZvbGlvLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ3NlcnZpY2VzJywge1xuXHRcdHVybDonL3NlcnZpY2VzJyxcblx0XHR0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvc2VydmljZXMuaHRtbCdcblx0fSlcbn0pIiwiJ3VzZSBzdHJpY3QnO1xuXG5wb3J0Zm9saW8uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgndGVhbScsIHtcblx0XHR1cmw6Jy90ZWFtJyxcblx0XHR0ZW1wbGF0ZVVybDonL3RlbXBsYXRlcy90ZWFtLmh0bWwnXG5cdH0pXG59KSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
